#:import Toolbar kivymd.uix.toolbar
#:import MDTextField kivymd.uix.textfield.MDTextField
#:import MDSeparator kivymd.uix.card.MDSeparator
#:import MDIconButton kivymd.uix.button.MDIconButton
#:import MDLabel kivymd.uix.label.MDLabel
#:import MDCard kivymd.uix.card.MDCard
#:import MDBoxLayout kivymd.uix.boxlayout.MDBoxLayout
#:import MDGridLayout kivymd.uix.gridlayout.MDGridLayout

<Search>:
    canvas.before:
        Color:
            rgba: [0.07, 0.07, 0.07, 1] # Substitua esta linha pela cor hexadecimal #1DB954
        Rectangle:
            size: self.size
            pos: self.pos
    name: 'search'
    MDBoxLayout:
        orientation: "vertical"

        MDBoxLayout:
            orientation: "vertical"
            padding: "10dp"

            MDBoxLayout:
                padding: "10dp"
                spacing: "10dp"
                size_hint_y: None
                height: "5dp"
            MDFloatLayout:
                MDLabel:
                    id: info_1
                    halign: "center"
                    text: 'Encontre o que você quer ouvir'
                    font_style: 'H6'
                    pos_hint: {'center_x': .5, 'center_y': .55}
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex('#ffffff')
                MDLabel:
                    id: info_2
                    halign: "center"
                    text: 'Pesquise por músicas ou por artistas'
                    font_style: 'Body2'
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    theme_text_color: "Custom"
                    text_color: get_color_from_hex('#ffffff')

                MDSpinner:
                    id: spinner
                    size_hint: None, None
                    size: dp(45), dp(45)
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    active: False
                    palette:
                        [
                        [1, 1, 1, 1],  # branco
                        [0.11372549019607843, 0.8156862745098039, 0.36470588235294116, 1]  # verde
                        ]


                MDCard:
                    md_bg_color: get_color_from_hex('#121212')
                    pos_hint: {'center_y': .98, 'center_x': .5}
                    size_hint_y: .07
                    elevation: 0
                    radius: [3,]
                    MDFloatLayout:
                        MDTextField:
                            id: textfield
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                            pos_hint: {'center_x': .55, 'center_y': .5}
                            line_color_focus: get_color_from_hex('#1DD05D')
                            text_color_normal: 0.5, 0.5, 0.5, 1  # definindo a cor do texto quando fora de foco
                            size_hint_x: .8
                            on_text_validate: root.pesquisar(textfield.text)


                        MDIconButton:
                            icon: 'arrow-left'
                            pos_hint: {'center_x': .05, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                            on_release: root.voltar()
                        MDLabel:
                            id: label_quer_ouvir
                            text: 'O que você quer ouvir?'
                            halign: 'left'
                            font_name: 'fonts/medium.otf'
                            pos_hint: {'center_x': .55, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#d6d6d6')

                            size_hint_x: .8

                MDLabel:
                    id: pesquisa_label
                    text: 'Pesquisa: '
                    theme_text_color: "Custom"
                    text_color: 1, 1, 1, 1
                    pos_hint: {'center_y': .9, 'center_x': .53}
                    font_name: 'fonts/medium.otf'
    MDFloatLayout:
        ScrollView:
            size_hint_y: .67
            pos_hint: {'center_x': 0.5, 'top': .85}
            GridLayout:
                id: add_search_music
                cols: 1
                padding: [12,12,12,2]
                spacing: "12dp"
                size_hint_y: None
                height: self.minimum_height
                adaptive_height: True
                pos_hint: {"center_x": 0.5}

                MDCard:
                    id: card0
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0
                    MDFloatLayout:
                        AsyncImage:
                            id: imagem0
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo0
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone0
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo0.text, '', 1, imagem0.source)

                        MDIconButton:
                            id: favoritar0
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')

                MDCard:
                    id: card1
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0

                    MDFloatLayout:
                        AsyncImage:
                            id: imagem1
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo1
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone1
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo1.text, '', 2, imagem1.source)

                        MDIconButton:
                            id: favoritar1
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')


                MDCard:
                    id: card2
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0

                    MDFloatLayout:
                        AsyncImage:
                            id: imagem2
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo2
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone2
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo2.text, '', 3, imagem2.source)

                        MDIconButton:
                            id: favoritar2
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')

                MDCard:
                    id: card3
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0

                    MDFloatLayout:
                        AsyncImage:
                            id: imagem3
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo3
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone3
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo3.text, '', 4, imagem3.source)

                        MDIconButton:
                            id: favoritar3
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')

                MDCard:
                    id: card4
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0

                    MDFloatLayout:
                        AsyncImage:
                            id: imagem4
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo4
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone4
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo4.text, '', 5, imagem4.source)

                        MDIconButton:
                            id: favoritar4
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')
                MDCard:
                    id: card5
                    size_hint_y: None
                    height: '65dp'
                    md_bg_color: get_color_from_hex('#121212')
                    elevation: 0
                    opacity: 0

                    MDFloatLayout:
                        AsyncImage:
                            id: imagem5
                            source: "imagens/carregando.png"
                            size_hint_y: None
                            height: '40dp'
                            pos_hint: {'center_y': .5, 'center_x': .1}
                        MDLabel:
                            id: titulo5
                            text: 'Procurando música'
                            size_hint_x: .55
                            halign: 'left'
                            font_style: 'Caption'
                            bold: True
                            pos_hint: {'center_y': .5, 'center_x': .57}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#ffffff')
                        MDIconButton:
                            id: icone5
                            icon: "play"
                            pos_hint: {'center_x': 9, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#FFFFFF')
                            on_release: root.tocar(titulo5.text, '', 6, imagem5.source)

                        MDIconButton:
                            id: favoritar5
                            font_size: "18sp"
                            icon: "heart-outline"
                            pos_hint: {'center_x': .25, 'center_y': .5}
                            theme_text_color: "Custom"
                            text_color: get_color_from_hex('#F70707')







    MDFloatLayout:

        ScrollView:
            do_scroll_y: False
            id: scroll
            size_hint: 1, 1  # define a altura do ScrollView em relação ao seu pai
            pos_hint: {'center_x': 0.53, 'top': 0.0}  # define a posição do ScrollView em relação ao seu pai

            MDCard:
                id: card
                on_touch_move: root.on_touch_move(args[1])
                size_hint: .95, .12
                radius: [8,]
                md_bg_color: get_color_from_hex('#1DD05D')


                FloatLayout:

                    FitImage:
                        id: image_musica
                        size_hint_x:.13
                        size_hint_y:.5
                        pos_hint: {'center_x': .08, 'center_y': .5}
                        source: 'akon.png'
                        allow_stretch: True
                        keep_ratio: True
                    MDLabel:
                        id: nome_musica
                        font_size: '13dp'
                        font_name: 'fonts/bold.otf'
                        text: 'O aplicativo está bugado!'
                        pos_hint: {'center_x': .44, 'center_y': .5}
                        size_hint_x: .55
                        halign: 'left'
                    MDIconButton:
                        id: play
                        icon: "play"
                        pos_hint: {'center_x': .92, 'center_y': .5}
                        theme_text_color: "Custom"
                        text_color: get_color_from_hex('#121212')
                        on_release: root.play_stop()
                    MDIconButton:
                        icon: "stop"
                        pos_hint: {'center_x': .8, 'center_y': .5}
                        theme_text_color: "Custom"
                        text_color: get_color_from_hex('#121212')
                        on_release: root.stop()
                    ProgressBar:

                        id: progress_bar
                        max: 100
                        size_hint_x:.98
                        pos_hint: {'center_x': .5, 'center_y': .04}
                        on_touch_down: root.click_barra(*args)
                        size_hint_y: .5


    ScrollView:
        do_scroll_y: False
        do_scroll_y: False
        pos_hint: {'center_x': 0.5, 'top': 0.10}  # define a posição do ScrollView em relação ao seu pai
        MDFloatLayout:
            MDCard:
                md_bg_color: 0, 0, 0, 0.1
                size_hint: 1, .14
                pos_hint: {"center_x": .5, "center_y": .925}
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.9 # define a cor de fundo (preto transparente)
                    Rectangle:
                        size: self.size
                        pos: self.pos

                MDFloatLayout:

                    MDIconButton:
                        pos_hint: {"center_x": .16, "center_y": .75}
                        icon: 'home'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#ffffff')
                        on_release: on_press: root.manager.transition.direction = 'left'; root.manager.current = 'inicio'

                    MDLabel:
                        pos_hint: {"center_x": .159, "center_y": .55}
                        text: 'Início'
                        halign: 'center'
                        font_name: 'fonts/medium.otf'
                        font_size: '13dp'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#ffffff')

                    MDIconButton:
                        pos_hint: {"center_x": .5, "center_y": .75}
                        icon: 'magnify'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#1DB954')

                    MDLabel:
                        pos_hint: {"center_x": .5, "center_y": .55}
                        text: 'Buscar'
                        font_size: '13dp'
                        halign: 'center'
                        font_name: 'fonts/medium.otf'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#1DB954')

                    MDIconButton:
                        pos_hint: {"center_x": .84, "center_y": .75}
                        icon: 'chip'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#ffffff')

                    MDLabel:
                        pos_hint: {"center_x": .84, "center_y": .55}
                        text: 'IA'
                        font_size: '13dp'
                        halign: 'center'
                        font_name: 'fonts/medium.otf'
                        theme_text_color: 'Custom'
                        text_color: get_color_from_hex('#ffffff')



    MDFloatLayout:

        ScrollView:
            do_scroll_y: False
            id: scroll
            size_hint: 1, 1  # define a altura do ScrollView em relação ao seu pai
            pos_hint: {'center_x': 0.53, 'top': 0.0}  # define a posição do ScrollView em relação ao seu pai

            MDCard:
                id: card
                on_touch_move: root.on_touch_move(args[1])
                size_hint: .95, .12
                radius: [8,]
                md_bg_color: get_color_from_hex('#1DD05D')


                FloatLayout:

                    FitImage:
                        id: image_musica
                        size_hint_x:.13
                        size_hint_y:.5
                        pos_hint: {'center_x': .08, 'center_y': .5}
                        source: 'akon.png'
                        allow_stretch: True
                        keep_ratio: True
                    MDLabel:
                        id: nome_musica
                        font_size: '13dp'
                        font_name: 'fonts/bold.otf'
                        text: 'O aplicativo está bugado!'
                        pos_hint: {'center_x': .44, 'center_y': .63}
                        size_hint_x: .55
                        halign: 'left'
                    MDLabel:
                        id: nome_artista
                        font_size: '13dp'
                        font_name: 'fonts/light.otf'
                        text: ''
                        pos_hint: {'center_x': .44, 'center_y': .35}
                        size_hint_x: .55
                        halign: 'left'
                    MDIconButton:
                        id: play
                        icon: "play"
                        pos_hint: {'center_x': .92, 'center_y': .5}
                        theme_text_color: "Custom"
                        text_color: get_color_from_hex('#121212')
                        on_release: root.play_stop()
                    MDIconButton:
                        icon: "stop"
                        pos_hint: {'center_x': .8, 'center_y': .5}
                        theme_text_color: "Custom"
                        text_color: get_color_from_hex('#121212')
                        on_release: root.stop()
                    ProgressBar:

                        id: progress_bar
                        max: 100
                        size_hint_x:.98
                        pos_hint: {'center_x': .5, 'center_y': .04}
                        on_touch_down: root.click_barra(*args)
                        size_hint_y: .5


